<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>module.exports = G;

var ArrayArgsMatcher = require('./matchers/array-args'),
  FunctionArgsMatcher = require('./matchers/function-args'),
  AlwaysBooleanMatcher = require('./matchers/always-boolean')
;

function assertFunk(funk, message) {
  if(!funk || funk.constructor !== Function) {
    throw new Error(message);
  }
}

/**
 * Representing ...
 * @function
 * @param {Object[]} matchers
 * @param {Object} opts
 */
function G(matchers, opts) {
  matchers = matchers || [];
  opts = opts || {};

  matchers.map(function(matcher, n){
    try {
      switch(matcher.match || matcher.match === false? matcher.match.constructor : undefined) {
        case Array:
          matcher.match = new ArrayArgsMatcher(matcher.match);
          break;
        case Function:
          matcher.match = new FunctionArgsMatcher(matcher.match);
          break;
        case Boolean:
          matcher.match = new AlwaysBooleanMatcher(matcher.match);
          break;
        default:
           throw new Error('You can only use Function, Array of regexs or a static Booloean');
      }
    } catch(err) {
      throw new Error('Bad matcher definition in index ' + n + '; ' + err.message);
    }

    return matcher;
  });

  return {
    funk: function(context, cb){
      if(arguments.length === 1) {
        cb = context;
        context = undefined;
      }

      if(context) {
        var cbName = cb;
        cb = context[cb];
        assertFunk(cb, cbName + ' could not be found');
        context[cbName] = exec;
      }

      if(arguments.length === 0) {
        cb = function(){};
      }

      assertFunk(cb, 'You did not provide a function to override');

      function exec(){
        var returnVal, args = Array.prototype.slice.call(arguments);

        function realExec() {
          returnVal = cb.apply(context, arguments);
        }

        var matched = matchers.filter(function(matcher){
          return matcher.match.test(args);
        }).shift();

        if(matched) {
          matched.exec.apply(matched, [realExec].concat(args));
        } else {
          realExec.apply(null, args);
        }

        return returnVal;
      }

      return exec;
    }
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#G">G</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Mon Jul 06 2015 12:12:41 GMT+0100 (BST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
